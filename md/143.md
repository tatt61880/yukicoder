\(K \times N\) から \(A_i\) を減らしていけば良いです。

計算結果が \(-1\) を下回ってしまっていたら、問題の指示に従って、\(-1\) を出力するようにしましょう。