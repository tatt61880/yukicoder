要素数4の配列 cup を用意します。  
cup[0] は使いません。  
cup[1] ～ cup[3] を使います。

\(M\)行の操作を1行ずつ処理します。  
Kuinにはswap演算子があるので、 cup[\(P\)] :$ cup[\(P\)] でswapできます。